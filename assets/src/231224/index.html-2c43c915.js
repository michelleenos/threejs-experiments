import{V as z,G as W,e as J,a as U,T as X,b as Y,f as E,F as H,B as Z,g as $,h as K,i as ee,j as Q,k as te,l as ie,N as se,L as ae,R as oe,m as ne,n as re,o as ce}from"../../three.core-dda14ae8.js";/* empty css                  */import{S as de}from"../../sizes-40a94193.js";import{T as he}from"../../timer-c04e4641.js";import{W as pe}from"../../World-fed11d95.js";import{m as k,f as ue}from"../../utils-100a9827.js";import{a as le}from"../../lil-gui.esm-ee8b5e9f.js";import"../../three.module-bbe333d0.js";import"../../OrbitControls-cba99037.js";const M={linear:e=>e,quadratic:e=>e*(-(e*e)*e+4*e*e-6*e+4),cubic:e=>e*(4*e*e-9*e+6),elastic:e=>e*(33*e*e*e*e-106*e*e*e+126*e*e-67*e+15),inQuad:e=>e*e,outQuad:e=>e*(2-e),inOutQuad:e=>e<.5?2*e*e:-1+(4-2*e)*e,inCubic:e=>e*e*e,outCubic:e=>--e*e*e+1,inOutCubic:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,inQuart:e=>e*e*e*e,outQuart:e=>1- --e*e*e*e,inOutQuart:e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,inQuint:e=>e*e*e*e*e,outQuint:e=>1+--e*e*e*e*e,inOutQuint:e=>e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e,inSine:e=>-Math.cos(e*(Math.PI/2))+1,outSine:e=>Math.sin(e*(Math.PI/2)),inOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,inExpo:e=>Math.pow(2,10*(e-1)),outExpo:e=>-Math.pow(2,-10*e)+1,inOutExpo:e=>(e/=.5,e<1?Math.pow(2,10*(e-1))/2:(e--,(-Math.pow(2,-10*e)+2)/2)),inCirc:e=>-Math.sqrt(1-e*e)+1,outCirc:e=>Math.sqrt(1-(e=e-1)*e),inOutCirc:e=>(e/=.5,e<1?-(Math.sqrt(1-e*e)-1)/2:(e-=2,(Math.sqrt(1-e*e)+1)/2))},c=[e=>Math.cos(e*2),e=>Math.sin(e*2),e=>Math.sin(e),e=>Math.cos(e),(e,t=.2)=>Math.cos(Math.sin(e)*t)];class G{world;meshes=[];scaleFn=c[0];posFn=c[2];easingShape="linear";easingTime="linear";material;group;rotateSpeed;coverAmt=1;initRotation=new z(0,0,0);_opacity=.5;_thickness=.02;_count=30;_radius=4;scaleVar=2;speed=1;constructor(t,{count:s=30,thickness:i=.02,radius:a=4,opacity:n=.5,scaleFn:u=c[0],posFn:r=c[2],rotateSpeed:h=new z(0,0,0),speed:w=1,initRotation:R=new z(0,0,0),easingTime:b,easingShape:V,matcap:D,coverAmt:L=1}){this._count=s,this._thickness=i,this._radius=a,this._opacity=n,this.scaleFn=u,this.posFn=r,this.rotateSpeed=h,this.world=t,this.speed=w,this.coverAmt=L,this.initRotation=R,b&&(this.easingTime=b),V&&(this.easingShape=V),this.group=new W,this.material=new J({color:"#fff",matcap:D,transparent:!0,side:U,opacity:this.opacity}),this.setupMeshes()}set visible(t){this.group.visible=t}get visible(){return this.group.visible}get blending(){return this.material.blending}set blending(t){this.material.blending=t}get opacity(){return this._opacity}set opacity(t){this._opacity=t,this.material.opacity=t}get radius(){return this._radius}set radius(t){this._radius=t,this.setupMeshes()}get count(){return this._count}set count(t){this._count=t,this.setupMeshes()}get thickness(){return this._thickness}set thickness(t){this._thickness=t,this.setupMeshes()}setupMeshes(){this.meshes.length>0&&this.meshes.forEach(t=>{this.world.scene.remove(t),this.group.remove(t),t.geometry.dispose()}),this.meshes=[];for(let t=0;t<this._count;t++){const s=new X(this._radius,this._thickness,20,100),i=new Y(s,this.material);i.rotateX(Math.PI/2),this.meshes.push(i)}this.group.add(...this.meshes),this.world.scene.add(this.group)}setColors(){this.meshes.forEach((t,s)=>{const i=s/this._count,a=t.geometry.attributes.position,n=a.count;let u=[],r=new E;for(let h=0;h<n;h++){let w=a.getY(h),R=i,b=k(w,this._radius*-1,this._radius,0,1);r.setRGB(R,b,1-i),u.push(r.r,r.g,r.b)}t.geometry.setAttribute("color",new H(u,3))})}update(t){let s=t*1e-4*this.speed;const i=k(M[this.easingTime](ue(s)),0,1,-1,1);this.meshes.forEach((a,n)=>{let r=(M[this.easingShape](n/this.count)*this.coverAmt+i)*(Math.PI*2);r%=Math.PI*2,a.position.y=this.posFn(r)*this.radius;const h=k(this.scaleFn(r,this.scaleVar),-1,1,.1,1);a.scale.set(h,h,h)}),this.group.rotation.set(this.initRotation.x+this.rotateSpeed.x*t,this.initRotation.y+this.rotateSpeed.y*t,this.initRotation.z+this.rotateSpeed.z*t)}}class P{geometry;positions;material;mesh;_count;texture;_color;_size;_opacity;_radius;rotateSpeed;constructor(t,{count:s=100,size:i=1,opacity:a=.5,color:n="#fff",radius:u=10}={}){this.texture=t,this._count=s,this._size=i,this._color=new E(n),this._opacity=a,this._radius=u,this.rotateSpeed=new z(-1e-4,1e-4,0),this.geometry=new Z,this.setPositions(),this.material=new $,this.setupMaterial(),this.mesh=new K(this.geometry,this.material)}get radius(){return this._radius}set radius(t){this._radius=t,this.setPositions()}get opacity(){return this._opacity}set opacity(t){this._opacity=t,this.setupMaterial()}get color(){return this._color}set color(t){this._color.set(t),this.setupMaterial()}get size(){return this._size}set size(t){this._size=t,this.setupMaterial()}get count(){return this._count}set count(t){this._count=t,this.setPositions()}getPointInSphere(){let t,s,i,a;do s=Math.random()*2-1,i=Math.random()*2-1,a=Math.random()*2-1,t=s*s+i*i+a*a;while(t>1);return{x:s,y:i,z:a}}setPositions(){this.positions=new Float32Array(this._count*3);for(let t=0;t<this._count;t++){let s=this.getPointInSphere();this.positions[t*3+0]=s.x*this._radius,this.positions[t*3+1]=s.y*this._radius,this.positions[t*3+2]=s.z*this._radius}this.geometry.setAttribute("position",new ee(this.positions,3))}setupMaterial(){this.material.size=this._size,this.material.opacity=this._opacity,this.material.sizeAttenuation=!0,this.material.depthWrite=!1,this.material.transparent=!0,this.material.alphaMap=this.texture,this.material.blending=Q,this.material.color=this._color,this.material.needsUpdate=!0}update(){this.mesh.rotateX(this.rotateSpeed.x),this.mesh.rotateY(this.rotateSpeed.y),this.mesh.rotateZ(this.rotateSpeed.z)}}const f=e=>({radius:e.radius,opacity:e.opacity,color:e.color.getHexString(),size:e.size,count:e.count,rotateSpeed:e.rotateSpeed,position:e.mesh.position}),O=e=>({speed:e.speed,radius:e.radius,opacity:e.opacity,thickness:e.thickness,count:e.count,scaleVar:e.scaleVar,coverAmt:e.coverAmt,scaleFn:c.indexOf(e.scaleFn),posFn:c.indexOf(e.posFn),easingTime:e.easingTime,easingShape:e.easingShape,blending:e.blending,visible:e.visible,initRotation:e.initRotation,rotateSpeed:e.rotateSpeed}),x=(e,t)=>{e.radius=t.radius,e.opacity=t.opacity,e.color=`#${t.color}`,e.size=t.size,e.count=t.count,e.rotateSpeed.set(t.rotateSpeed.x,t.rotateSpeed.y,t.rotateSpeed.z),e.mesh.position.set(t.position.x,t.position.y,t.position.z)},I=(e,t)=>{e.speed=t.speed,e.radius=t.radius,e.opacity=t.opacity,e.thickness=t.thickness,e.count=t.count,e.scaleVar=t.scaleVar,e.coverAmt=t.coverAmt,e.scaleFn=c[t.scaleFn],e.posFn=c[t.posFn],e.easingTime=t.easingTime,e.easingShape=t.easingShape,e.blending=t.blending,e.visible=t.visible,e.initRotation.set(t.initRotation.x,t.initRotation.y,t.initRotation.z),e.rotateSpeed.set(t.rotateSpeed.x,t.rotateSpeed.y,t.rotateSpeed.z)},T=[[{speed:0,radius:3,opacity:1,thickness:.027,count:29,scaleVar:2,coverAmt:1,scaleFn:2,posFn:1,easingShape:"linear",easingTime:"linear",blending:1,visible:!0,initRotation:{x:.26,y:0,z:.42},rotateSpeed:{x:3e-4,y:0,z:0}},{speed:.4,radius:5.24,opacity:1,thickness:.005,count:41,scaleVar:2,coverAmt:.07,scaleFn:0,posFn:2,easingShape:"outCubic",easingTime:"linear",blending:1,visible:!0,initRotation:{x:.58,y:.07,z:-.61},rotateSpeed:{x:0,y:0,z:0}}],[{speed:.8,radius:4.22,opacity:.3,thickness:.144,count:164,scaleVar:2,coverAmt:.15,scaleFn:1,posFn:3,easingShape:"inCubic",easingTime:"linear",blending:2,visible:!0,initRotation:{x:0,y:0,z:0},rotateSpeed:{x:0,y:0,z:0}},{speed:.4,radius:5.74,opacity:.447,thickness:.057,count:17,scaleVar:-2.05,coverAmt:.2,scaleFn:4,posFn:0,easingShape:"outCubic",easingTime:"linear",blending:1,visible:!1,initRotation:{x:0,y:0,z:0},rotateSpeed:{x:0,y:0,z:0}}],[{speed:0,radius:3,opacity:1,thickness:.02,count:115,scaleVar:2,coverAmt:1,scaleFn:0,posFn:2,easingShape:"inOutCubic",easingTime:"linear",blending:1,visible:!0,initRotation:{x:0,y:0,z:0},rotateSpeed:{x:0,y:0,z:0}},{speed:.3,radius:5,opacity:1,thickness:.045,count:29,scaleVar:2,coverAmt:.5,scaleFn:0,posFn:2,easingTime:"linear",easingShape:"linear",blending:1,visible:!0,initRotation:{x:0,y:0,z:1.57},rotateSpeed:{x:0,y:0,z:0}}],[{speed:1.6,radius:4.26,opacity:1,thickness:.018,count:46,scaleVar:2,coverAmt:.3,scaleFn:0,posFn:3,easingTime:"linear",easingShape:"quadratic",blending:1,visible:!0,initRotation:{x:-.64,y:.02,z:0},rotateSpeed:{x:0,y:0,z:0}},{speed:.4,radius:3.52,opacity:1,thickness:.005,count:41,scaleVar:2,coverAmt:.07,scaleFn:0,posFn:2,easingTime:"linear",easingShape:"outCubic",blending:1,visible:!1,initRotation:{x:.58,y:.07,z:-.61},rotateSpeed:{x:0,y:0,z:0}}]],A=[[{radius:10,opacity:.3,color:"4f2f63",size:10,count:50,rotateSpeed:{x:-1e-4,y:1e-4,z:0},position:{x:0,y:0,z:0}},{radius:10,opacity:.3,color:"0003e7",size:10,count:50,rotateSpeed:{x:-1e-4,y:1e-4,z:-18e-5},position:{x:0,y:0,z:0}},{radius:14,opacity:1,color:"ffffff",size:.1,count:300,rotateSpeed:{x:.001,y:-.001,z:0},position:{x:0,y:0,z:0}},{radius:14,opacity:1,color:"ffffff",size:.2,count:50,rotateSpeed:{x:5e-4,y:5e-4,z:5e-4},position:{x:0,y:0,z:0}}]],C=new he,me=new de,d=new pe(me),y=new te,ye=y.load("/stars/smoke_01.png"),ge=y.load("/stars/smoke_02.png"),Se=y.load("/stars/star_01.png"),be=y.load("/stars/star_04.png"),j=y.load("/matcaps/blueish.png"),g=new P(ye),S=new P(ge),l=new P(Se),m=new P(be);l.rotateSpeed.set(.001,-.001,0);m.rotateSpeed.set(5e-4,5e-4,5e-4);d.scene.add(g.mesh,S.mesh,l.mesh,m.mesh);const _=new G(d,{matcap:j}),F=new G(d,{matcap:j});d.camera.position.set(0,0,10);d.controls.maxDistance=50;d.controls.enablePan=!1;d.scene.fog=new ie("#120b45",0,20);const v=(e,t,s)=>{const i=e.addFolder(s);i.add(t,"radius",0,20),i.add(t,"opacity",0,1),i.addColor(t,"color"),i.add(t,"size",0,20),i.add(t,"count",0,5e3);const a=i.addFolder("Rotate Speed").close();a.add(t.rotateSpeed,"x",-.02,.02,1e-4),a.add(t.rotateSpeed,"y",-.02,.02,1e-4),a.add(t.rotateSpeed,"z",-.02,.02,1e-4);const n=i.addFolder("Position").close();n.add(t.mesh.position,"x",-20,20),n.add(t.mesh.position,"y",-20,20),n.add(t.mesh.position,"z",-20,20),i.close()},B=(e,t,s)=>{const i=e.addFolder(s);i.add(t,"speed",0,4,.1),i.add(t,"radius",0,20),i.add(t,"opacity",0,1),i.add(t,"thickness",0,.5,.001),i.add(t,"count",0,1e3,1),i.add(t,"scaleVar",-10,10,.01),i.add(t,"coverAmt",0,1,.01),i.add(t,"scaleFn",c),i.add(t,"posFn",c),i.add(t,"easingTime",Object.keys(M)),i.add(t,"easingShape",Object.keys(M)),i.add(t,"blending",{Normal:ce,Additive:Q}),i.add(t,"visible");const a=i.addFolder("Rotation").close();a.add(t.initRotation,"x",-Math.PI,Math.PI,.01),a.add(t.initRotation,"y",-Math.PI,Math.PI,.01),a.add(t.initRotation,"z",-Math.PI,Math.PI,.01),a.add(t.rotateSpeed,"x",-.02,.02,1e-4).name("speed x"),a.add(t.rotateSpeed,"y",-.02,.02,1e-4).name("speed y"),a.add(t.rotateSpeed,"z",-.02,.02,1e-4).name("speed z"),i.close()},fe=()=>[O(_),O(F)],xe=()=>[f(g),f(S),f(l),f(m)],N=(e,t)=>{x(g,e[0]),x(S,e[1]),x(l,e[2]),x(m,e[3]),t&&t.controllersRecursive().forEach(s=>s.updateDisplay())},q=(e,t)=>{I(_,e[0]),I(F,e[1]),t&&t.controllersRecursive().forEach(s=>s.updateDisplay())},o=new le;v(o,g,"Smoke 1");v(o,S,"Smoke 2");v(o,l,"Star 1");v(o,m,"Star 2");B(o,_,"Rings 1");B(o,F,"Rings 2");const p={copyPresetRings:()=>navigator.clipboard.writeText(JSON.stringify(fe(),null,2)),copyPresetParticles:()=>navigator.clipboard.writeText(JSON.stringify(xe(),null,2)),particlesPreset:0,ringsPreset:0};o.add(p,"copyPresetRings");o.add(p,"copyPresetParticles");o.add(p,"ringsPreset",Object.keys(T)).onChange(()=>{const e=T[p.ringsPreset];q(e,o)});o.add(p,"particlesPreset",Object.keys(A)).onChange(()=>{const e=A[p.particlesPreset];N(e,o)});o.add(d.renderer,"toneMappingExposure",0,10,.5).name("Exposure");o.add(d.renderer,"toneMapping",{None:se,Linear:ae,Reinhard:oe,Cineon:ne,ACESFilmic:re}).name("Tone Mapping");N(A[p.particlesPreset]);q(T[p.ringsPreset]);function ze(){_.update(C.elapsed),F.update(C.elapsed),g.update(),S.update(),l.update(),m.update(),d.render()}C.on("tick",ze);
