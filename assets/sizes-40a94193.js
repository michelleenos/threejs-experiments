class h{callbacks;constructor(){this.callbacks={},this.callbacks.base={}}on(t,a){return typeof t>"u"||t===""?(console.warn("wrong names"),!1):typeof a>"u"?(console.warn("wrong callback"),!1):(this.resolveNames(t).forEach(e=>{const s=this.resolveName(e);this.callbacks[s.namespace]instanceof Object||(this.callbacks[s.namespace]={}),this.callbacks[s.namespace][s.value]instanceof Array||(this.callbacks[s.namespace][s.value]=[]),this.callbacks[s.namespace][s.value].push(a)}),this)}off(t){return typeof t>"u"||t===""?(console.warn("wrong name"),!1):(this.resolveNames(t).forEach(n=>{const e=this.resolveName(n);if(e.namespace!=="base"&&e.value==="")delete this.callbacks[e.namespace];else if(e.namespace==="base")for(const s in this.callbacks)this.callbacks[s]instanceof Object&&this.callbacks[s][e.value]instanceof Array&&(delete this.callbacks[s][e.value],Object.keys(this.callbacks[s]).length===0&&delete this.callbacks[s]);else this.callbacks[e.namespace]instanceof Object&&this.callbacks[e.namespace][e.value]instanceof Array&&(delete this.callbacks[e.namespace][e.value],Object.keys(this.callbacks[e.namespace]).length===0&&delete this.callbacks[e.namespace])}),this)}trigger(t,a){if(typeof t>"u"||t==="")return console.warn("wrong name"),!1;let n,e=null;const s=a instanceof Array?a:[];let r=this.resolveNames(t),i=this.resolveName(r[0]);if(i.namespace==="base")for(const c in this.callbacks)this.callbacks[c]instanceof Object&&this.callbacks[c][i.value]instanceof Array&&this.callbacks[c][i.value].forEach(o=>{e=o.apply(this,s),typeof n>"u"&&(n=e)});else if(this.callbacks[i.namespace]instanceof Object){if(i.value==="")return console.warn("wrong name"),this;this.callbacks[i.namespace][i.value].forEach(c=>{e=c.apply(this,s),typeof n>"u"&&(n=e)})}return n}resolveNames(t){let a=t;return a=a.replace(/[^a-zA-Z0-9 ,/.]/g,""),a=a.replace(/[,/]+/g," "),a.split(" ")}resolveName(t){const a=t.split("."),n={original:t,value:a[0],namespace:"base"};return a.length>1&&a[1]!==""&&(n.namespace=a[1]),n}}class f extends h{width=window.innerWidth;height=window.innerHeight;pixelRatio=Math.min(window.devicePixelRatio,2);constructor(){super(),window.addEventListener("resize",()=>{this.width=window.innerWidth,this.height=window.innerHeight,this.pixelRatio=Math.min(window.devicePixelRatio,2),this.trigger("resize")})}}export{h as E,f as S};
