import{v as Vector2}from"./three.core-cdbdf8aa.js";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lib={},types={};Object.defineProperty(types,"__esModule",{value:!0});var ee={},taskCollection$1={},taskCollection={},utils$1={};Object.defineProperty(utils$1,"__esModule",{value:!0});utils$1._fast_remove_single=void 0;function _fast_remove_single(e,n){n!==-1&&(n===0?e.shift():n===e.length-1?e.length=e.length-1:e.splice(n,1))}utils$1._fast_remove_single=_fast_remove_single;var bakeCollection={};(function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=function(){};var FORLOOP_FALLBACK=1500;function generateArgsDefCode(e){var n="";if(e===0)return n;for(var i=0;i<e-1;++i)n+="arg"+String(i)+", ";return n+="arg"+String(e-1),n}function generateBodyPartsCode(e,n){for(var i="",t="",s=0;s<n;++s)i+="var f".concat(s," = collection[").concat(s,`];
`),t+="f".concat(s,"(").concat(e,`)
`);return{funcDefCode:i,funcCallCode:t}}function generateBodyPartsVariadicCode(e){for(var n="",i="",t=0;t<e;++t)n+="var f".concat(t," = collection[").concat(t,`];
`),i+="f".concat(t,`.apply(undefined, arguments)
`);return{funcDefCode:n,funcCallCode:i}}function bakeCollection(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                `).concat(funcCallCode,`
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);collection.length%10===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 10) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                        collection[i+4](`).concat(argsDefCode,`);
                        collection[i+5](`).concat(argsDefCode,`);
                        collection[i+6](`).concat(argsDefCode,`);
                        collection[i+7](`).concat(argsDefCode,`);
                        collection[i+8](`).concat(argsDefCode,`);
                        collection[i+9](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%4===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 4) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%3===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 3) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                    }
                });
            })`):funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; ++i) {
                        collection[i](`).concat(argsDefCode,`);
                    }
                });
            })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollection=bakeCollection;function bakeCollectionAwait(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                return Promise.all([ `).concat(funcCallCode,` ]);
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=`(function(collection) {
            return (function(`.concat(argsDefCode,`) {
                var promises = Array(collection.length);
                for (var i = 0; i < collection.length; ++i) {
                    promises[i] = collection[i](`).concat(argsDefCode,`);
                }
                return Promise.all(promises);
            });
        })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionAwait=bakeCollectionAwait;function bakeCollectionVariadic(collection){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function() {
                `).concat(funcCallCode,`
            });
        })`)}else funcFactoryCode=`(function(collection) {
            return (function() {
                for (var i = 0; i < collection.length; ++i) {
                    collection[i].apply(undefined, arguments);
                }
            });
        })`;{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionVariadic=bakeCollectionVariadic})(bakeCollection);var __spreadArray$1=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,n,i){if(i||arguments.length===2)for(var t=0,s=n.length,o;t<s;t++)(o||!(t in n))&&(o||(o=Array.prototype.slice.call(n,0,t)),o[t]=n[t]);return e.concat(o||Array.prototype.slice.call(n))};Object.defineProperty(taskCollection,"__esModule",{value:!0});taskCollection.TaskCollection=void 0;var utils_1$1=utils$1,bake_collection_1=bakeCollection;function push_norebuild(e,n){var i=this.length;if(i>1)if(n){var t;(t=this._tasks).push.apply(t,arguments),this.length+=arguments.length}else this._tasks.push(e),this.length++;else if(n){if(i===1){var s=Array(1+arguments.length);s.push(s),s.push.apply(s,arguments),this._tasks=s}else{var s=Array(arguments.length);s.push.apply(s,arguments),this._tasks=s}this.length+=arguments.length}else i===1?this._tasks=[this._tasks,e]:this._tasks=e,this.length++}function push_rebuild(e,n){var i=this.length;if(i>1)if(n){var t;(t=this._tasks).push.apply(t,arguments),this.length+=arguments.length}else this._tasks.push(e),this.length++;else if(n){if(i===1){var s=Array(1+arguments.length);s.push(s),s.push.apply(s,arguments),this._tasks=s}else{var s=Array(arguments.length);s.push.apply(s,arguments),this._tasks=s}this.length+=arguments.length}else i===1?this._tasks=[this._tasks,e]:this._tasks=e,this.length++;this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild()}function removeLast_norebuild(e){this.length!==0&&(this.length===1?this._tasks===e&&(this.length=0):((0,utils_1$1._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function removeLast_rebuild(e){if(this.length!==0){if(this.length===1)if(this._tasks===e&&(this.length=0),this.firstEmitBuildStrategy){this.call=bake_collection_1.BAKED_EMPTY_FUNC;return}else{this.rebuild();return}else(0,utils_1$1._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(e)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length;this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild()}}function insert_norebuild(e){for(var n,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];this.length===0?(this._tasks=i,this.length=1):this.length===1?(i.unshift(this._tasks),this._tasks=i,this.length=this._tasks.length):((n=this._tasks).splice.apply(n,__spreadArray$1([e,0],i,!1)),this.length=this._tasks.length)}function insert_rebuild(e){for(var n,i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];this.length===0?(this._tasks=i,this.length=1):this.length===1?(i.unshift(this._tasks),this._tasks=i,this.length=this._tasks.length):((n=this._tasks).splice.apply(n,__spreadArray$1([e,0],i,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild()}function rebuild_noawait(){this.length===0?this.call=bake_collection_1.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,bake_collection_1.bakeCollection)(this._tasks,this.argsNum)}function rebuild_await(){this.length===0?this.call=bake_collection_1.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,bake_collection_1.bakeCollectionAwait)(this._tasks,this.argsNum)}function rebuild_on_first_call(){this.rebuild(),this.call.apply(void 0,arguments)}var TaskCollection=function(){function e(n,i,t,s){i===void 0&&(i=!0),t===void 0&&(t=null),s===void 0&&(s=!1),this.awaitTasks=s,this.call=bake_collection_1.BAKED_EMPTY_FUNC,this.argsNum=n,this.firstEmitBuildStrategy=!0,s?this.rebuild=rebuild_await.bind(this):this.rebuild=rebuild_noawait.bind(this),this.setAutoRebuild(i),t?typeof t=="function"?(this._tasks=t,this.length=1):(this._tasks=t,this.length=t.length):(this._tasks=null,this.length=0),i&&this.rebuild()}return e}();taskCollection.TaskCollection=TaskCollection;function fastClear(){this._tasks=null,this.length=0,this.call=bake_collection_1.BAKED_EMPTY_FUNC}function clear(){this._tasks=null,this.length=0,this.call=bake_collection_1.BAKED_EMPTY_FUNC}function growArgsNum(e){this.argsNum<e&&(this.argsNum=e,this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild())}function setAutoRebuild(e){e?(this.push=push_rebuild.bind(this),this.insert=insert_rebuild.bind(this),this.removeLast=removeLast_rebuild.bind(this)):(this.push=push_norebuild.bind(this),this.insert=insert_norebuild.bind(this),this.removeLast=removeLast_norebuild.bind(this))}function tasksAsArray(){return this.length===0?[]:this.length===1?[this._tasks]:this._tasks}function setTasks(e){e.length===0?(this.length=0,this.call=bake_collection_1.BAKED_EMPTY_FUNC):e.length===1?(this.length=1,this.call=e[0],this._tasks=e[0]):(this.length=e.length,this._tasks=e,this.firstEmitBuildStrategy?this.call=rebuild_on_first_call:this.rebuild())}TaskCollection.prototype.fastClear=fastClear;TaskCollection.prototype.clear=clear;TaskCollection.prototype.growArgsNum=growArgsNum;TaskCollection.prototype.setAutoRebuild=setAutoRebuild;TaskCollection.prototype.tasksAsArray=tasksAsArray;TaskCollection.prototype.setTasks=setTasks;(function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,s,o,r){r===void 0&&(r=o);var l=Object.getOwnPropertyDescriptor(s,o);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(t,r,l)}:function(t,s,o,r){r===void 0&&(r=o),t[r]=s[o]}),i=commonjsGlobal&&commonjsGlobal.__exportStar||function(t,s){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&n(s,t,o)};Object.defineProperty(e,"__esModule",{value:!0}),i(taskCollection,e)})(taskCollection$1);var utils={};Object.defineProperty(utils,"__esModule",{value:!0});utils.nullObj=void 0;function nullObj(){var e={};return e.__proto__=null,e}utils.nullObj=nullObj;var __spreadArray=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,n,i){if(i||arguments.length===2)for(var t=0,s=n.length,o;t<s;t++)(o||!(t in n))&&(o||(o=Array.prototype.slice.call(n,0,t)),o[t]=n[t]);return e.concat(o||Array.prototype.slice.call(n))};Object.defineProperty(ee,"__esModule",{value:!0});ee.EventEmitter=void 0;var task_collection_1=taskCollection$1,utils_1=utils$1,utils_2=utils;function emit(e,n,i,t,s,o){var r=this.events[e];if(r){if(r.length===0)return!1;if(r.argsNum<6)r.call(n,i,t,s,o);else{for(var l=new Array(r.argsNum),c=0,a=l.length;c<a;++c)l[c]=arguments[c+1];r.call.apply(void 0,l)}return!0}return!1}function emitHasOnce(e,n,i,t,s,o){var r=this.events[e],l;if(r!==void 0){if(r.length===0)return!1;if(r.argsNum<6)r.call(n,i,t,s,o);else{l=new Array(r.argsNum);for(var c=0,a=l.length;c<a;++c)l[c]=arguments[c+1];r.call.apply(void 0,l)}}var u=this.onceEvents[e];if(u){if(typeof u=="function")if(this.onceEvents[e]=void 0,arguments.length<6)u(n,i,t,s,o);else{if(l===void 0){l=new Array(arguments.length-1);for(var c=0,a=l.length;c<a;++c)l[c]=arguments[c+1]}u.apply(void 0,l)}else{var f=u;if(this.onceEvents[e]=void 0,arguments.length<6)for(var c=0;c<f.length;++c)f[c](n,i,t,s,o);else{if(l===void 0){l=new Array(arguments.length-1);for(var c=0,a=l.length;c<a;++c)l[c]=arguments[c+1]}for(var c=0;c<f.length;++c)f[c].apply(void 0,l)}}return!0}return r!==void 0}var EventEmitter=function(){function e(){this.events=(0,utils_2.nullObj)(),this.onceEvents=(0,utils_2.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(e.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),e}();ee.EventEmitter=EventEmitter;function once(e,n){switch(this.emit===emit&&(this.emit=emitHasOnce),typeof this.onceEvents[e]){case"undefined":this.onceEvents[e]=n,typeof e=="symbol"&&this._symbolKeys.add(e);break;case"function":this.onceEvents[e]=[this.onceEvents[e],n];break;case"object":this.onceEvents[e].push(n)}return this}function addListener(e,n,i){if(i===void 0&&(i=n.length),typeof n!="function")throw new TypeError("The listener must be a function");var t=this.events[e];return t?(t.push(n),t.growArgsNum(i),this.maxListeners!==1/0&&this.maxListeners<=t.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))):(this.events[e]=new task_collection_1.TaskCollection(i,!0,n,!1),typeof e=="symbol"&&this._symbolKeys.add(e)),this}function removeListener(e,n){var i=this.events[e];i&&i.removeLast(n);var t=this.onceEvents[e];return t&&(typeof t=="function"?this.onceEvents[e]=void 0:typeof t=="object"&&(t.length===1&&t[0]===n?this.onceEvents[e]=void 0:(0,utils_1._fast_remove_single)(t,t.lastIndexOf(n)))),this}function addListenerBound(e,n,i,t){i===void 0&&(i=this),t===void 0&&(t=n.length),this.boundFuncs||(this.boundFuncs=new Map);var s=n.bind(i);return this.boundFuncs.set(n,s),this.addListener(e,s,t)}function removeListenerBound(e,n){var i,t,s=(i=this.boundFuncs)===null||i===void 0?void 0:i.get(n);return(t=this.boundFuncs)===null||t===void 0||t.delete(n),this.removeListener(e,s)}function hasListeners(e){return this.events[e]&&!!this.events[e].length}function prependListener(e,n,i){if(i===void 0&&(i=n.length),typeof n!="function")throw new TypeError("The listener must be a function");var t=this.events[e];return!t||!(t instanceof task_collection_1.TaskCollection)?(t=this.events[e]=new task_collection_1.TaskCollection(i,!0,n,!1),typeof e=="symbol"&&this._symbolKeys.add(e)):(t.insert(0,n),t.growArgsNum(i),this.maxListeners!==1/0&&this.maxListeners<=t.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" event!'))),this}function prependOnceListener(e,n){this.emit===emit&&(this.emit=emitHasOnce);var i=this.onceEvents[e];return i?typeof i!="object"?(this.onceEvents[e]=[n,i],typeof e=="symbol"&&this._symbolKeys.add(e)):(i.unshift(n),this.maxListeners!==1/0&&this.maxListeners<=i.length&&console.warn('Maximum event listeners for "'.concat(String(e),'" once event!'))):(this.onceEvents[e]=[n],typeof e=="symbol"&&this._symbolKeys.add(e)),this}function removeAllListeners(e){return e===void 0?(this.events=(0,utils_2.nullObj)(),this.onceEvents=(0,utils_2.nullObj)(),this._symbolKeys=new Set):(this.events[e]=void 0,this.onceEvents[e]=void 0,typeof e=="symbol"&&this._symbolKeys.delete(e)),this}function setMaxListeners(e){return this.maxListeners=e,this}function getMaxListeners(){return this.maxListeners}function listeners(e){return this.emit===emit?this.events[e]?this.events[e].tasksAsArray().slice():[]:this.events[e]&&this.onceEvents[e]?__spreadArray(__spreadArray([],this.events[e].tasksAsArray(),!0),typeof this.onceEvents[e]=="function"?[this.onceEvents[e]]:this.onceEvents[e],!0):this.events[e]?this.events[e].tasksAsArray():this.onceEvents[e]?typeof this.onceEvents[e]=="function"?[this.onceEvents[e]]:this.onceEvents[e]:[]}function eventNames(){var e=this;if(this.emit===emit){var n=Object.keys(this.events);return __spreadArray(__spreadArray([],n,!0),Array.from(this._symbolKeys),!0).filter(function(t){return t in e.events&&e.events[t]&&e.events[t].length})}else{var n=Object.keys(this.events).filter(function(s){return e.events[s]&&e.events[s].length}),i=Object.keys(this.onceEvents).filter(function(s){return e.onceEvents[s]&&e.onceEvents[s].length});return __spreadArray(__spreadArray(__spreadArray([],n,!0),i,!0),Array.from(this._symbolKeys).filter(function(s){return s in e.events&&e.events[s]&&e.events[s].length||s in e.onceEvents&&e.onceEvents[s]&&e.onceEvents[s].length}),!0)}}function listenerCount(e){return this.emit===emit?this.events[e]&&this.events[e].length||0:(this.events[e]&&this.events[e].length||0)+(this.onceEvents[e]&&this.onceEvents[e].length||0)}EventEmitter.prototype.emit=emit;EventEmitter.prototype.on=addListener;EventEmitter.prototype.once=once;EventEmitter.prototype.addListener=addListener;EventEmitter.prototype.removeListener=removeListener;EventEmitter.prototype.addListenerBound=addListenerBound;EventEmitter.prototype.removeListenerBound=removeListenerBound;EventEmitter.prototype.hasListeners=hasListeners;EventEmitter.prototype.prependListener=prependListener;EventEmitter.prototype.prependOnceListener=prependOnceListener;EventEmitter.prototype.off=removeListener;EventEmitter.prototype.removeAllListeners=removeAllListeners;EventEmitter.prototype.setMaxListeners=setMaxListeners;EventEmitter.prototype.getMaxListeners=getMaxListeners;EventEmitter.prototype.listeners=listeners;EventEmitter.prototype.eventNames=eventNames;EventEmitter.prototype.listenerCount=listenerCount;(function(e){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,s,o,r){r===void 0&&(r=o);var l=Object.getOwnPropertyDescriptor(s,o);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[o]}}),Object.defineProperty(t,r,l)}:function(t,s,o,r){r===void 0&&(r=o),t[r]=s[o]}),i=commonjsGlobal&&commonjsGlobal.__exportStar||function(t,s){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(s,o)&&n(s,t,o)};Object.defineProperty(e,"__esModule",{value:!0}),i(types,e),i(ee,e)})(lib);class Mouse extends lib.EventEmitter{pos=new Vector2;posPrev=new Vector2;screenPos=new Vector2;posLerp=new Vector2;lerpVal=.1;sizes;constructor(n){super(),this.sizes=n,document.addEventListener("mousemove",this.onMouseMove)}onMouseMove=n=>{this.posPrev.copy(this.pos),this.screenPos.set(n.clientX,n.clientY),this.pos.set(n.clientX/this.sizes.width*2-1,-(n.clientY/this.sizes.height)*2+1),this.posLerp.lerp(this.pos,this.lerpVal),this.emit("mouseMove")};update=()=>{this.posLerp.lerp(this.pos,this.lerpVal)}}export{Mouse as M};
